#functions { #interface { append_separator [ [ #single source ] [ #single separator ] #boolean [ #data #equals ] [ #scope:source:-1 ] [ #scope:separator ] #if [ #data #true ] [ #last ] #return [ #scope:source ] #end #string [ #scope:source ] [ #scope:separator ] #return [ #last ] ] boolean_from_string [ [ #single value ] [ #single variable ] #boolean [ #data #equals ] [ #scope:value ] [ #data "true" ] #modify [ #data #scope:_0 ] [ #last ] #boolean [ #data #equals ] [ #scope:value ] [ #data "TRUE" ] #modify [ #data #scope:_1 ] [ #last ] #boolean [ #data #or ] [ #scope:_0 ] [ #scope:_1 ] #if [ #data #true ] [ #last ] #return [ #data !true ] #else #boolean [ #data #equals ] [ #scope:value ] [ #data "false" ] #modify [ #data #scope:_2 ] [ #last ] #boolean [ #data #equals ] [ #scope:value ] [ #data "FALSE" ] #modify [ #data #scope:_3 ] [ #last ] #boolean [ #data #or ] [ #scope:_2 ] [ #scope:_3 ] #if [ #data #true ] [ #last ] #return [ #data !false ] #else #string [ #data "invalid value \"" ] [ #scope:value ] [ #data "\" for environment variable " ] [ #scope:variable ] [ #data "; valid values are \"true\", \"TRUE\", \"false\"and \"FALSE\"" ] #modify [ #data #scope:_4 ] [ #last ] #error [ #scope:_4 ] #end #end ] process_arguments [ [ #single command_lookup ] [ #single arguments ] #modify [ #data #scope:configuration ] [ #data { } ] #length [ #scope:arguments ] #modify [ #data #scope:count ] [ #last ] #modify [ #data #scope:index ] [ #data 1 ] #modify [ #data #scope:set ] [ #data [ ] ] #iterate [ #scope:command_lookup ] #modify [ #data #scope:key ] [ #last:key ] [ #data #scope:entry ] [ #last:value ] #insert [ #scope:configuration ] [ #scope:key ] [ #scope:entry:default ] #modify [ #data #scope:configuration ] [ #last ] #end #boolean [ #data #not_bigger ] [ #scope:index ] [ #scope:count ] #modify [ #data #scope:_0 ] [ #last ] #while [ #data #true ] [ #scope:_0 ] #index [ #scope:arguments ] [ #scope:index ] #modify [ #data #scope:argument ] [ #last ] #modify [ #data #scope:found ] [ #data !false ] #iterate [ #scope:command_lookup ] #modify [ #data #scope:key ] [ #last:key ] [ #data #scope:entry ] [ #last:value ] #boolean [ #data #equals ] [ #scope:argument ] [ #scope:entry:flag ] #modify [ #data #scope:_1 ] [ #last ] #boolean [ #data #equals ] [ #scope:argument ] [ #scope:entry:long ] #modify [ #data #scope:_2 ] [ #last ] #boolean [ #data #or ] [ #scope:_1 ] [ #scope:_2 ] #if [ #data #true ] [ #last ] #boolean [ #data #contains ] [ #scope:set ] [ #scope:key ] #modify [ #data #scope:_3 ] [ #last ] #boolean [ #data #and ] [ #scope:entry:once ] [ #scope:_3 ] #if [ #data #true ] [ #last ] #string [ #scope:key ] [ #data " flag may only be set once" ] #modify [ #data #scope:_4 ] [ #last ] #error [ #scope:_4 ] #end #boolean [ #data #string ] [ #scope:entry:default ] #if [ #data #true ] [ #last ] #boolean [ #data #bigger ] [ #scope:count ] [ #scope:index ] #modify [ #data #scope:_5 ] [ #last ] #string [ #scope:key ] [ #data " flag expected argument" ] #modify [ #data #scope:_6 ] [ #last ] #ensure [ #data #true ] [ #scope:_5 ] [ #scope:_6 ] #add [ #scope:index ] [ #data 1 ] #modify [ #data #scope:index ] [ #last ] #index [ #scope:arguments ] [ #scope:index ] #modify [ #data #scope:_7 ] [ #last ] #overwrite [ #scope:configuration ] [ #scope:key ] [ #scope:_7 ] #modify [ #data #scope:configuration ] [ #last ] #else #not [ #scope:entry:default ] #modify [ #data #scope:inverted ] [ #last ] #overwrite [ #scope:configuration ] [ #scope:key ] [ #scope:inverted ] #modify [ #data #scope:configuration ] [ #last ] #end #append [ #scope:set ] [ #scope:key ] #modify [ #data #scope:set ] [ #last ] #add [ #scope:index ] [ #data 1 ] #modify [ #data #scope:index ] [ #last ] #modify [ #data #scope:found ] [ #data !true ] #break #end #end #not [ #scope:found ] #if [ #data #true ] [ #last ] #string [ #data "invalid flag " ] [ #scope:argument ] #modify [ #data #scope:_8 ] [ #last ] #print_line [ #scope:_8 ] #modify [ #data #scope:configuration:help ] [ #data !true ] #break #end #boolean [ #data #not_bigger ] [ #scope:index ] [ #scope:count ] #modify [ #data #scope:_0 ] [ #last ] #end #iterate [ #scope:command_lookup ] #modify [ #data #scope:key ] [ #last:key ] [ #data #scope:entry ] [ #last:value ] #boolean [ #data #not_contains ] [ #scope:set ] [ #scope:key ] #if [ #data #true ] [ #last ] #environment [ #scope:entry:environment ] #modify [ #data #scope:value ] [ #last ] #boolean [ #data #not_equals ] [ #scope:value ] [ #data #none ] #if [ #data #true ] [ #last ] #boolean [ #data #string ] [ #scope:entry:default ] #if [ #data #true ] [ #last ] #overwrite [ #scope:configuration ] [ #scope:key ] [ #scope:value ] #modify [ #data #scope:configuration ] [ #last ] #else #call [ #data #interface:boolean_from_string ] [ #scope:value ] [ #scope:entry:environment ] #modify [ #data #scope:boolean ] [ #last ] #overwrite [ #scope:configuration ] [ #scope:key ] [ #scope:boolean ] #modify [ #data #scope:configuration ] [ #last ] #end #end #end #end #iterate [ #scope:command_lookup ] #modify [ #data #scope:key ] [ #last:key ] [ #data #scope:entry ] [ #last:value ] #boolean [ #data #string ] [ #scope:entry:default ] #if [ #data #true ] [ #last ] #boolean [ #data #equals ] [ #scope:entry:default:-1 ] [ #data '/' ] #if [ #data #true ] [ #last ] #index [ #scope:configuration ] [ #scope:key ] #modify [ #data #scope:_9 ] [ #last ] #call [ #data #interface:append_separator ] [ #scope:_9 ] [ #data '/' ] #modify [ #data #scope:directory ] [ #last ] #overwrite [ #scope:configuration ] [ #scope:key ] [ #scope:directory ] #modify [ #data #scope:configuration ] [ #last ] #end #end #end #return [ #scope:configuration ] ] } } 